
<h2>Task一覧</h2>
<p><%= notice %></p>

<%#= form_with url: tasks_path, method: :get, local: true do |s| %>
<%= form_with url: tasks_path, method: :get, local: true do |s| %>
  <div class="search_field">
    <%= s.label :search, 'タスク名' %>
    <%= s.text_field :search %>
    <%= s.label :status, 'ステータス' %>
    <%#= s.select :status, Task.statuses.keys.to_a, {} %>
    <%= s.select :status, options_for_select(Task.statuses.keys.to_a, {}), {include_blank: true} %>
    <%#= s.select :status, Task.statuses.keys.to_a, include_blank: true %>
    <%= s.submit '検索' %>
  </div>
<% end %>


<p><%#= link_to "終了期限でソートする",tasks_path(sort_expired: "true") %>

<table border="1" style="border-collapse: collapse">
  <tr>
    <th>Task名</th>
    <th>詳細</th>
    <th>終了期限<%= link_to "(ソート)",tasks_path(sort_expired: "true") %></th>
    <th>作成日</th>
    <th>ステータス</th>
    <th>優先度<%= link_to "(sort)",tasks_path(sort_priority: "true") %></th>
  </tr>
  <tr>
  <% @tasks.each do |task| %>
    <td class="task_row" ><%= task.task_name %></td>
    <td class="details_row" ><%= task.details %></td>
    <td class="deadline_row" ><%= task.deadline %></td>
    <td><%= l task.created_at %></td>
    <td class="status_row" ><%= task.status %></td>
    <td class="priority_row" ><%= task.priority %></td>
    <td><%= link_to '詳細', task_path(task.id) %></td>
    <td><%= link_to '編集', edit_task_path(task.id) %></td>
    <td><%= link_to '削除', task_path(task.id), method: :delete %></td>
  </tr>
  <% end %>
  
</table>

<p><%= link_to 'Task作成', new_task_path %></p>

<%= paginate @tasks %>

